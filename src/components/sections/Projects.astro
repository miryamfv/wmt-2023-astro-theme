---
import { contentfulClient } from "../../lib/contentful";
import type { project } from "../../lib/contentful";

import Project from "../cards/Project.astro";
import Container from "../shared/Container.astro";

const entries = await contentfulClient.getEntries<project>({
    content_type: "project",
});
const projects = entries.items.map((item) => {
    const { title, description, url, thumbnail } = item.fields;
    return {
        title,
        url,
        description,
        thumbnail,
    };
});
---

<section id="Work">
    <Container className="space-y-10 md:sapce-y-12">
        <div class="text-center max-w-3xl mx-auto space-y-4">
            <h1
                class="text-heading-1 font-semibold text-2xl sm:text-3xl md:text-4xl"
            >
                Recent Work
            </h1>
            <p class="md:text-xl text-heading-2">
                <div
                    class="bgdetail absolute rotate-45 -left-5 md:-left-10 lg:-left-20 xl:-left-24 p-1 top-1/2 w-16 h-16 bg-gradient-to-br from-primary to-green-400 blur-3xl opacity-50"
                >
                </div>
                <div
                    class="bgdetail absolute p-1 -top-4 md:-top-10 right-0 w-20 h-20 bg-gradient-to-br from-primary to-green-400 rounded-full blur-3xl opacity-60"
                >
                </div>

                <span
                    class="bgdetail absolute w-1/3 aspect-[16/5] -skew-x-12 rounded-full bg-gradient-to-tr from-aqua to-heading-3-400 opacity-40 blur-2xl left-2/4 bottom-1/4"
                ></span>
            </p>
        </div>
    </Container>
</section>

<section id="sectionPin">
    <!-- <span
        class="absolute right-4 bottom-12 w-24 h-24 rounded-3xl bg-primary blur-xl opacity-80"
    ></span> -->
    <div class="pin-wrap-sticky">
        <span
            class="w-4/12 lg:w-2/12 aspect-square bg-gradient-to-tr from-aqua to-primary absolute top-20 lg:left-0 rounded-full skew-y-12 blur-2xl opacity-40 skew-x-12 rotate-90"
        ></span>
        <div class="pin-wrap">
            {
                projects.map((project) => (
                    <Project
                        title={project.title}
                        description={project.description}
                        url={project.url ? `${project.url}` : "#"}
                        thumbnail={project.thumbnail}
                    >
                        <span slot="icon">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                fill="none"
                                viewBox="0 0 24 24"
                                stroke-width="1.5"
                                stroke="currentColor"
                                class="w-6 h-6"
                            >
                                <path
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    d="M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"
                                />
                            </svg>
                        </span>
                    </Project>
                ))
            }
        </div>
    </div>
</section>
<style>
    .pin-wrap {
        display: grid;
        grid-template-columns: repeat(1fr);
        gap: 1.5rem;
    }
    @media (min-width: 640px) {
        .pin-wrap {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            width: 90%;
            margin: 0 auto;
        }
    }

    @media (min-width: 1024px) {
        .card {
            margin: 0;
        }

        .pin-wrap {
            grid-template-columns: repeat(auto-fill, minmax(420px, 1fr));
        }
    }

    @media (min-width: 1280px) {
        .pin-wrap {
            width: 80%;
            margin: 0 auto;
        }
    }
</style>
